<!-- ================= Titre principal ================= -->
<h2 class="text-center mb-4 main-title">
  Zone M√©decin ü©∫ <br>
  <span class="subtitle">(Programme m√©dical d‚Äôexercices)</span>
</h2>

<form [formGroup]="prescriptionForm" (ngSubmit)="onSubmit()" class="p-4 bg-white rounded shadow">

  <!-- ================= Section A ================= -->
  <h3 class="mb-3 section-title">A. Observations et informations patient</h3>
  <hr>
  <div class="mb-3">
    <label class="form-label">Observations :</label>
    <textarea class="form-control" formControlName="observations" rows="3" placeholder="√âcrivez les observations ici"></textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">Niveau de risque :</label><br>
    <div *ngFor="let n of niveauxRisque" class="form-check form-check-inline">
      <input class="form-check-input" type="radio" formControlName="niveauRisque" [value]="n">
      <label class="form-check-label">{{ n }}</label>
    </div>
  </div>

  <!-- ================= Section B ================= -->
  <h3 class="mb-3 section-title">B. Type de maladie / trouble cibl√©</h3>
  <hr>
  <div formArrayName="troubles" class="mb-3">
    <div *ngFor="let t of troubles; let i = index" class="form-check">
      <input class="form-check-input" type="checkbox" [formControlName]="i" (change)="onTroubleChange(t, $event)">
      <label class="form-check-label">{{ t }}</label>
    </div>
  </div>

  <div *ngIf="autresTroublesSelected" class="mb-3">
    <input class="form-control" type="text" formControlName="autresTroubles" placeholder="Pr√©cisez autre trouble">
  </div>

  <!-- ================= Section C ================= -->
  <h3 class="mb-3 section-title">C. Ordonnance d‚Äôactivit√©s physiques</h3>
  <hr>

  <!-- 1. Fr√©quence des exercices -->
  <div class="mb-3">
    <label class="form-label">1. Fr√©quence des exercices :</label><br>
    <div *ngFor="let f of frequences" class="form-check form-check-inline">
      <input class="form-check-input" type="radio" formControlName="frequence" [value]="f">
      <label class="form-check-label">{{ f }}</label>
    </div>
  </div>

  <!-- 2. Type d‚Äôexercice -->
  <div class="mb-3">
    <label class="form-label">2. Type d‚Äôexercice √† prescrire :</label><br>
    <div *ngFor="let t of troubles">
      <div *ngIf="exercices[t]">
        <strong class="d-block mt-2">Pour {{ t }} :</strong>
        <div *ngFor="let ex of exercices[t]" class="form-check">
          <input class="form-check-input" type="checkbox" (change)="toggleExercice(ex, $event)">
          <label class="form-check-label">{{ ex }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Exercice personnalis√© -->
  <div class="mb-3">
    <label class="form-label">Exercice personnalis√© :</label>
    <input class="form-control mb-2" type="text" formControlName="exercicePersoNom" placeholder="Nom">
    <input class="form-control" type="text" formControlName="exercicePersoDesc" placeholder="Description">
  </div>

  <!-- 3. Instructions pour le patient -->
  <div class="mb-3">
    <label class="form-label">3. Instructions pour le patient :</label>
    <textarea class="form-control" formControlName="instructions" rows="3" placeholder="√âcrivez les instructions ici"></textarea>
  </div>

  <!-- 4. Dur√©e de la prescription -->
  <div class="mb-3">
    <label class="form-label">4. Dur√©e de la prescription :</label><br>
    <div *ngFor="let d of durees" class="form-check form-check-inline">
      <input class="form-check-input" type="radio" formControlName="duree" [value]="d">
      <label class="form-check-label">{{ d }}</label>
    </div>
  </div>

  <button type="submit" class="btn btn-primary w-100">Enregistrer</button>
</form>
