<div class="forgot-password-container">
  <div class="card">
    <div class="card-header">
      <h2>
        <i class="fas fa-key me-2"></i>
        استعادة كلمة المرور
      </h2>
    </div>
    
    <div class="card-body">
      <!-- حالة النجاح -->
      <div *ngIf="isSuccess" class="text-center">
        <div class="success-icon mb-3">
          <i class="fas fa-check-circle"></i>
        </div>
        
        <h4 class="text-success">تم الإرسال بنجاح!</h4>
        
        <div class="alert alert-success">
          <p class="mb-2">{{ message }}</p>
          <small class="text-muted">
            يرجى التحقق من صندوق الوارد والمجلد spam
          </small>
        </div>

        <div class="countdown mt-3">
          <p class="text-muted">
            سيتم توجيهك إلى صفحة تسجيل الدخول خلال 
            <span class="countdown-number">5</span> 
            ثوانٍ...
          </p>
        </div>

        <button 
          class="btn btn-primary"
          (click)="goToLogin()">
          <i class="fas fa-sign-in-alt me-1"></i>
          الانتقال الآن إلى تسجيل الدخول
        </button>
      </div>

      <!-- نموذج استعادة كلمة المرور -->
      <form 
        *ngIf="!isSuccess" 
        (ngSubmit)="onSubmit()" 
        #forgotPasswordForm="ngForm">
        
        <div class="alert alert-info">
          <i class="fas fa-info-circle me-2"></i>
          أدخل بريدك الإلكتروني وسنرسل لك كلمة مرور جديدة
        </div>

        <div class="form-group">
          <label for="email" class="form-label">
            <i class="fas fa-envelope me-1"></i>
            البريد الإلكتروني
          </label>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="requestData.email"
            required
            email
            class="form-control form-control-lg"
            placeholder="أدخل بريدك الإلكتروني المسجل"
            [class.is-invalid]="errorMessage"
            [disabled]="isLoading">
        </div>

        <!-- رسائل الخطأ -->
        <div *ngIf="errorMessage" class="alert alert-danger">
          <i class="fas fa-exclamation-triangle me-2"></i>
          {{ errorMessage }}
        </div>

        <!-- أزرار -->
        <div class="d-grid gap-2 mt-4">
          <button
            type="submit"
            class="btn btn-primary btn-lg"
            [disabled]="!forgotPasswordForm.form.valid || isLoading">
            
            <span *ngIf="!isLoading">
              <i class="fas fa-paper-plane me-1"></i>
              إرسال كلمة المرور الجديدة
            </span>
            
            <span *ngIf="isLoading">
              <i class="fas fa-spinner fa-spin me-1"></i>
              جاري الإرسال...
            </span>
          </button>

          <div class="d-flex gap-2">
            <button
              type="button"
              class="btn btn-outline-secondary flex-fill"
              (click)="resetForm()"
              [disabled]="isLoading">
              <i class="fas fa-eraser me-1"></i>
              تفريغ
            </button>

            <button
              type="button"
              class="btn btn-outline-secondary flex-fill"
              (click)="goToLogin()"
              [disabled]="isLoading">
              <i class="fas fa-arrow-right me-1"></i>
              تسجيل الدخول
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- في forgot-password.component.html -->
<div class="card-footer" *ngIf="!isSuccess">
  <div class="text-center">
    <small class="text-muted">أدوات التdebug:</small>
    <div class="btn-group mt-2" role="group">
      <button 
        type="button" 
        class="btn btn-sm btn-outline-info"
        (click)="testEmailJS()"
        [disabled]="isLoading">
        <i class="fas fa-paper-plane me-1"></i>
        اختبار البريد
      </button>
      <button 
        type="button" 
        class="btn btn-sm btn-outline-warning"
        (click)="showEmailJSConfig()">
        <i class="fas fa-cog me-1"></i>
        عرض الإعدادات
      </button>
    </div>
  </div>
</div>