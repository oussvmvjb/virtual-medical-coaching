<div class="login-container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-lg p-3 login-card">
    
    <div class="text-center mb-2">
      <h4 class="fw-bold text-medical-blue"><i class="fas fa-user-plus me-1"></i>Créer un compte</h4>
      <p class="text-muted small">Rejoignez notre plateforme</p>
    </div>

    <div class="alert alert-info py-1 mb-2 small">
      <i class="fas fa-info-circle me-1"></i>
      Email et téléphone non enregistrés
    </div>

    <form (ngSubmit)="onSubmit()">
      <div class="row mb-2">
        <div class="col-6">
          <div class="mb-2">
            <label for="nom" class="form-label small"><i class="fas fa-user me-1"></i>Nom</label>
            <input
              type="text"
              id="nom"
              name="nom"
              [(ngModel)]="signupData.nom"
              required
              class="form-control form-control-sm"
              placeholder="Votre nom">
          </div>
        </div>
        <div class="col-6">
          <div class="mb-2">
            <label for="prenom" class="form-label small"><i class="fas fa-user me-1"></i>Prénom</label>
            <input
              type="text"
              id="prenom"
              name="prenom"
              [(ngModel)]="signupData.prenom"
              required
              class="form-control form-control-sm"
              placeholder="Votre prénom">
          </div>
        </div>
      </div>

      <div class="mb-2">
        <label for="email" class="form-label small"><i class="fas fa-envelope me-1"></i>Email</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="signupData.email"
          required
          email
          class="form-control form-control-sm"
          placeholder="Votre email">
      </div>

      <!-- Nouveau champ Rôle -->
      <div class="mb-2">
        <label for="role" class="form-label small"><i class="fas fa-user-tag me-1"></i>Rôle</label>
        <select
          id="role"
          name="role"
          [(ngModel)]="signupData.role"
          required
          class="form-control form-control-sm">
          <option value="USER">Utilisateur</option>
          <option value="COACH">Coach</option>
        </select>
      </div>

      <div class="mb-2">
        <label for="telephone" class="form-label small"><i class="fas fa-phone me-1"></i>Téléphone</label>
        <input
          type="tel"
          id="telephone"
          name="telephone"
          [(ngModel)]="signupData.telephone"
          required
          pattern="[0-9]{8,8}"
          class="form-control form-control-sm"
          placeholder="Numéro (8 chiffres)">
      </div>

      <div class="row mb-2">
        <div class="col-6">
          <div class="mb-2">
            <label for="psw" class="form-label small"><i class="fas fa-lock me-1"></i>Mot de passe</label>
            <input
              type="password"
              id="psw"
              name="psw"
              [(ngModel)]="signupData.psw"
              required
              minlength="6"
              class="form-control form-control-sm"
              placeholder="Mot de passe"
              (input)="checkPasswordMatch()">
          </div>
        </div>
        <div class="col-6">
          <div class="mb-2">
            <label for="confirmPassword" class="form-label small"><i class="fas fa-lock me-1"></i>Confirmation</label>
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              [(ngModel)]="signupData.confirmPassword"
              required
              class="form-control form-control-sm"
              placeholder="Confirmer"
              (input)="checkPasswordMatch()">
          </div>
        </div>
      </div>

      <div *ngIf="passwordMismatch" class="alert alert-warning py-1 small mb-2">
        <i class="fas fa-exclamation-triangle me-1"></i>
        Mots de passe différents
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger py-1 small mb-2">
        <i class="fas fa-times-circle me-1"></i>
        {{ errorMessage }}
      </div>

      <button type="submit" class="btn btn-medical-blue w-100 py-1 btn-sm" 
              [disabled]="isLoading || passwordMismatch">
        <span *ngIf="!isLoading"><i class="fas fa-user-plus me-1"></i>Créer compte</span>
        <span *ngIf="isLoading"><i class="fas fa-spinner fa-spin me-1"></i>Création...</span>
      </button>

      <button type="button" class="btn btn-outline-secondary w-100 py-1 btn-sm mt-1" 
              (click)="clearForm()" [disabled]="isLoading">
        <i class="fas fa-eraser me-1"></i>Réinitialiser
      </button>
    </form>

    <div class="text-center mt-2">
      <a (click)="goToLogin()" class="text-decoration-none small">
        <i class="fas fa-sign-in-alt me-1"></i>Déjà un compte ? Connexion
      </a>
    </div>

  </div>
</div>