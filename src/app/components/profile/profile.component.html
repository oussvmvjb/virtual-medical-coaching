<div class="prescription-container">
  <div class="container mt-5"> 
    
<div class="page-header-section profile-header mb-4">
  <div class="header-content">
    <div class="medical-icon profile">
      <i class="fas fa-user-circle"></i>
    </div>
    <div class="header-text">
      <h1 class="main-title">Mon Profil</h1>
      <p class="subtitle">Gestion de votre compte personnel</p>
    </div>
  </div>
</div>

    <div class="profile-content">
      
      <div class="alert-container">
        <div *ngIf="errorMessage" class="alert-medical alert-danger">
          <div class="alert-content">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span>{{ errorMessage }}</span>
          </div>
          <button type="button" class="alert-close" (click)="errorMessage = ''">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div *ngIf="successMessage" class="alert-medical alert-success">
          <div class="alert-content">
            <i class="fas fa-check-circle me-2"></i>
            <span>{{ successMessage }}</span>
          </div>
          <button type="button" class="alert-close" (click)="successMessage = ''">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>

      <div class="medical-stats-section mb-4">
        <div class="stats-grid">
          <div class="stat-item user-id">
            <div class="stat-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <div class="stat-info">
              <div class="stat-number">{{ currentUser?.id || 'N/A' }}</div>
              <div class="stat-label">ID Utilisateur</div>
            </div>
          </div>

          <div class="stat-item role">
            <div class="stat-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="stat-info">
              <div class="stat-number">{{ getRoleText(currentUser?.role) }}</div>
              <div class="stat-label">Rôle</div>
            </div>
          </div>

          <div class="stat-item member-since">
            <div class="stat-icon">
              <i class="fas fa-calendar-plus"></i>
            </div>
            <div class="stat-info">
              <div class="stat-number">{{ currentUser?.dateCreation ? (currentUser.dateCreation | date:'dd/MM/yyyy') : 'N/A' }}</div>
              <div class="stat-label">Membre depuis</div>
            </div>
          </div>
        </div>
      </div>

      <div class="card-medical mb-4">
        <div class="card-header-medical">
          <h5 class="card-title">
            <i class="fas fa-user me-2"></i>Informations Personnelles
          </h5>
        </div>
        
        <div class="card-body-medical">
          <div *ngIf="!isEditing; else editMode">
            <div class="info-grid">
              <div class="info-item">
                <div class="info-icon">
                  <i class="fas fa-user"></i>
                </div>
                <div class="info-content">
                  <div class="info-label">Nom complet</div>
                  <div class="info-value">{{ currentUser?.prenom }} {{ currentUser?.nom }}</div>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <i class="fas fa-envelope"></i>
                </div>
                <div class="info-content">
                  <div class="info-label">Email</div>
                  <div class="info-value">{{ currentUser?.email }}</div>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <i class="fas fa-phone"></i>
                </div>
                <div class="info-content">
                  <div class="info-label">Téléphone</div>
                  <div class="info-value">{{ currentUser?.telephone || 'Non renseigné' }}</div>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="info-content">
                  <div class="info-label">Rôle</div>
                  <div class="info-value">
                    <span [class]="getRoleBadgeClass(currentUser?.role)">
                      {{ getRoleText(currentUser?.role) }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <ng-template #editMode>
            <div class="edit-form-medical">
              <div class="form-grid">
                <div class="form-group-medical">
                  <label class="form-label-medical">
                    <i class="fas fa-user me-2"></i>Prénom
                  </label>
                  <input type="text" class="form-input-medical" [(ngModel)]="editData.prenom" placeholder="Votre prénom">
                </div>

                <div class="form-group-medical">
                  <label class="form-label-medical">
                    <i class="fas fa-user me-2"></i>Nom
                  </label>
                  <input type="text" class="form-input-medical" [(ngModel)]="editData.nom" placeholder="Votre nom">
                </div>

                <div class="form-group-medical">
                  <label class="form-label-medical">
                    <i class="fas fa-envelope me-2"></i>Email
                  </label>
                  <input type="email" class="form-input-medical" [(ngModel)]="editData.email" placeholder="votre@email.com">
                </div>

                <div class="form-group-medical">
                  <label class="form-label-medical">
                    <i class="fas fa-phone me-2"></i>Téléphone
                  </label>
                  <input type="tel" class="form-input-medical" [(ngModel)]="editData.tel" placeholder="Votre numéro de téléphone">
                </div>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

      <div class="action-section-medical">
        <div *ngIf="!isEditing; else saveCancelButtons">
          <div class="action-buttons">
            <button class="btn-medical btn-warning" (click)="modifierProfil()" [disabled]="isLoading">
              <i class="fas fa-edit me-2"></i>
              {{ isLoading ? 'Chargement...' : 'Modifier le Profil' }}
            </button>
            <button class="btn-medical btn-outline" (click)="retourAccueil()">
              <i class="fas fa-home me-2"></i>Retour à l'Accueil
            </button>
            <button class="btn-medical btn-danger" (click)="supprimerCompte()" [disabled]="isLoading">
              <i class="fas fa-trash-alt me-2"></i>Supprimer le Compte
            </button>
          </div>
        </div>

        <ng-template #saveCancelButtons>
          <div class="action-buttons">
            <button class="btn-medical btn-success" (click)="sauvegarderModifications()" [disabled]="isLoading">
              <i class="fas fa-save me-2"></i>
              {{ isLoading ? 'Sauvegarde...' : 'Sauvegarder' }}
            </button>
            <button class="btn-medical btn-secondary" (click)="annulerModification()" [disabled]="isLoading">
              <i class="fas fa-times me-2"></i>Annuler
            </button>
          </div>
        </ng-template>
      </div>

      <div class="card-medical mt-4">
        <div class="card-header-medical">
          <h5 class="card-title">
            <i class="fas fa-info-circle me-2"></i>Informations du Compte
          </h5>
        </div>
        <div class="card-body-medical">
          <div class="features-grid">
            <div class="feature-item">
              <div class="feature-icon last-login">
                <i class="fas fa-calendar-check"></i>
              </div>
              <div class="feature-content">
                <h6>Dernière connexion</h6>
                <p>{{ currentUser?.lastLogin ? (currentUser.lastLogin | date:'dd/MM/yyyy HH:mm') : 'Non disponible' }}</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon status">
                <i class="fas fa-user-check"></i>
              </div>
              <div class="feature-content">
                <h6>Statut du compte</h6>
                <p>Actif</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon notifications">
                <i class="fas fa-bell"></i>
              </div>
              <div class="feature-content">
                <h6>Notifications</h6>
                <p>Activées</p>
              </div>
            </div>

            <div class="feature-item">
              <div class="feature-icon security">
                <i class="fas fa-lock"></i>
              </div>
              <div class="feature-content">
                <h6>Sécurité</h6>
                <p>Standard</p>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>